/**
* {{&summary}}
* @method
{{#externalDocs}}
* @see {@link {{&url}}|{{#description}}{{&description}}{{/description}}{{^description}}External docs{{/description}}}
{{/externalDocs}}
* @name {{&className}}#{{&methodName}}
*/
{{&methodName}}(
    {{#parameters}}
        {{#isPathParameter}}{{&camelCaseName}}{{&cardinality}}: {{> type}},{{/isPathParameter}}
    {{/parameters}}
    parameters: {
        {{#parameters}}
            {{#isQueryParameter}}
                {{^isSingleton}}
                    '{{&camelCaseName}}'{{&cardinality}}: {{> type}},
                {{/isSingleton}}
            {{/isQueryParameter}}
            {{#isHeaderParameter}}
                {{^isSingleton}}
                    '{{&camelCaseName}}'{{&cardinality}}: {{> type}},
                {{/isSingleton}}
            {{/isHeaderParameter}}
        {{/parameters}}
    } {{&defaultParam}},
    {{#hasBody}}
    {{#isFormMethod}}form{{/isFormMethod}}{{^isFormMethod}}body{{/isFormMethod}}: 
        {{#parameters}}
            {{#isBodyParameter}}
                {{^isSingleton}}
                    {{> type}},
                {{/isSingleton}}
            {{/isBodyParameter}}
            {{#isFormParameter}}
                {{^isSingleton}}
                    {{> type}},
                {{/isSingleton}}
            {{/isFormParameter}}
        {{/parameters}}
    {{/hasBody}}
): Promise<{{#successResponses}} {{> type}} {{^last}} | {{/last}} {{/successResponses}}{{^successResponses}}void{{/successResponses}}>
{
    let path = '{{&path}}';
    let headers: Headers = new Headers();
    let queryParameters: QueryParameters = {};

{{#isSecure}}
    headers = this.appendAuthHeaders(headers);
{{/isSecure}}
{{#headers}}
    headers.append('{{&name}}', '{{&value}}');
{{/headers}}

{{#parameters}}
    {{#isQueryParameter}}
      {{#isSingleton}}
        queryParameters['{{&name}}'] = '{{&singleton}}';
      {{/isSingleton}}
      {{^isSingleton}}
        {{#isPatternType}}
          Object.keys(parameters).forEach(function(parameterName) {
            if(new RegExp('{{&pattern}}').test(parameterName)){
              queryParameters[parameterName] = parameters[parameterName];
            }
          });
        {{/isPatternType}}
        {{#default}}
          /** set default value **/
          {{#isDefaultQuoted}}
          queryParameters['{{&name}}'] = queryParameters['{{&name}}'] !== undefined ? queryParameters['{{&name}}'] : '{{default}}';
          {{/isDefaultQuoted}}
          {{^isDefaultQuoted}}
          queryParameters['{{&name}}'] = queryParameters['{{&name}}'] !== undefined ? queryParameters['{{&name}}'] : {{default}};
          {{/isDefaultQuoted}}
        {{/default}}
      {{/isSingleton}}
    {{/isQueryParameter}}

    {{#isPathParameter}}
        path = path.replace('{{=<% %>=}}{<%&name%>}<%={{ }}=%>', {{&camelCaseName}}.toString());
    {{/isPathParameter}}

    {{#isHeaderParameter}}
        {{#isSingleton}}
            headers.append('{{&name}}', '{{&singleton}}');
        {{/isSingleton}}
        {{^isSingleton}}
            if(typeof parameters['{{&camelCaseName}}'] !== 'undefined') {
                headers.append('{{&name}}', parameters['{{&camelCaseName}}']!);
            }
        {{/isSingleton}}
    {{/isHeaderParameter}}

    {{#required}}
        {{#isQueryParameter}}
            if(queryParameters['{{&camelCaseName}}'] === undefined) {
                throw new RestError('Missing required {{&paramType}} parameter: {{&camelCaseName}}');
            }
        {{/isQueryParameter}}
    {{/required}}

{{/parameters}}

    return this.request(
        '{{method}}',
        `${this.baseUrl}${path}`,
        {{#hasBody}}{{#isFormMethod}}form{{/isFormMethod}}{{^isFormMethod}}body{{/isFormMethod}}{{/hasBody}}{{^hasBody}}{}{{/hasBody}},
        headers,
        queryParameters
    );
}
